{"ast":null,"code":"var _jsxFileName = \"/Users/idg08/Desktop/works/hospital/src/App.js\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport MapGL from \"react-map-gl\";\nimport CheckBoxs from \"./components/CheckBoxs\";\nimport BottomBtn from \"./components/BottomBtn\";\nimport { d3csv } from 'd3-fetch'; //mapboxのトークンは自分で取得したものに変更してください。\n//このトークンは突然使えなくなる可能性があります。\n\nconst MAPBOX_TOKEN = \"pk.eyJ1Ijoic2hpbWl6dSIsImEiOiJjam95MDBhamYxMjA1M2tyemk2aHMwenp5In0.i2kMIJulhyPLwp3jiLlpsA\";\nconst CHIKA_DATA_FILE = \"data/covid-19_daily_survey.csv\";\n\nfunction App() {\n  const mapRef = useRef(null);\n  const bbtnRef = useRef(null);\n  const [data, setData] = useState(null);\n  const [viewport, setViewport] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    longitude: 139.0110974,\n    latitude: 36.3226885,\n    zoom: 6,\n    maxZoom: 20\n  });\n\n  const handleChangeCheckbox = v => {\n    console.log(v);\n  };\n\n  const handleChangeBottomBtn = v => {\n    console.log(v);\n  };\n\n  const getMapsize = () => {\n    const width = mapRef.current ? mapRef.current.offsetWidth : 0;\n    const height = mapRef.current ? mapRef.current.offsetHeight : 0;\n    const bbtnHeight = bbtnRef.current ? bbtnRef.current.offsetHeight : 0;\n    setViewport(v => {\n      return { ...v,\n        width: width,\n        height: height - bbtnHeight\n      };\n    });\n  }; //ロード時にコンポネーントのwidth,heightを取得\n\n\n  useEffect(getMapsize, []); //データロード\n\n  useEffect(() => {\n    const fetchValueData = async url => {\n      const result = await d3csv(DATA_URL, tsvcast);\n      console.log(result);\n      setData(result);\n    };\n\n    fetchValueData();\n  }, []); //resize\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", getMapsize);\n    return () => window.removeEventListener(\"resize\", getMapsize);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"\\u533B\\u7642\\u63D0\\u4F9B\\u4F53\\u5236\\u306E\\u72B6\\u6CC1\"))), /*#__PURE__*/React.createElement(CheckBoxs, {\n    changeCheckbox: handleChangeCheckbox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"map\",\n    ref: mapRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MapGL, Object.assign({\n    style: {}\n  }, viewport, {\n    mapStyle: \"mapbox://styles/mapbox/streets-v11\",\n    mapboxApiAccessToken: MAPBOX_TOKEN,\n    onViewportChange: v => setViewport(v),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"bottom\",\n    ref: bbtnRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BottomBtn, {\n    changeBottomBtn: handleChangeBottomBtn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;\n/*\n \n\n        */","map":{"version":3,"sources":["/Users/idg08/Desktop/works/hospital/src/App.js"],"names":["React","useEffect","useState","useRef","AppBar","Toolbar","Typography","MapGL","CheckBoxs","BottomBtn","d3csv","MAPBOX_TOKEN","CHIKA_DATA_FILE","App","mapRef","bbtnRef","data","setData","viewport","setViewport","width","window","innerWidth","height","innerHeight","longitude","latitude","zoom","maxZoom","handleChangeCheckbox","v","console","log","handleChangeBottomBtn","getMapsize","current","offsetWidth","offsetHeight","bbtnHeight","fetchValueData","url","result","DATA_URL","tsvcast","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\n\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport MapGL from \"react-map-gl\";\n\nimport CheckBoxs from \"./components/CheckBoxs\";\nimport BottomBtn from \"./components/BottomBtn\";\n\n\nimport { d3csv } from 'd3-fetch';\n\n//mapboxのトークンは自分で取得したものに変更してください。\n//このトークンは突然使えなくなる可能性があります。\nconst MAPBOX_TOKEN =\n  \"pk.eyJ1Ijoic2hpbWl6dSIsImEiOiJjam95MDBhamYxMjA1M2tyemk2aHMwenp5In0.i2kMIJulhyPLwp3jiLlpsA\";\n\n  const CHIKA_DATA_FILE = \"data/covid-19_daily_survey.csv\";\n\nfunction App() {\n  const mapRef = useRef(null);\n  const bbtnRef = useRef(null);\n  const [data, setData] = useState(null);\n\n  const [viewport, setViewport] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    longitude: 139.0110974,\n    latitude: 36.3226885,\n    zoom: 6,\n    maxZoom: 20\n  });\n\n  const handleChangeCheckbox = v => {\n    console.log(v);\n  };\n\n  const handleChangeBottomBtn = v => {\n    console.log(v);\n  };\n\n  const getMapsize = () => {\n    const width = mapRef.current ? mapRef.current.offsetWidth : 0;\n    const height = mapRef.current ? mapRef.current.offsetHeight : 0;\n    const bbtnHeight = bbtnRef.current ? bbtnRef.current.offsetHeight : 0;\n\n    setViewport(v => {\n      return {\n        ...v,\n        width: width,\n        height: height - bbtnHeight\n      };\n    });\n  };\n\n  //ロード時にコンポネーントのwidth,heightを取得\n  useEffect(getMapsize, []);\n\n  //データロード\n  useEffect(()=>{\n\t\tconst fetchValueData = async (url) => {\n      const result = await d3csv(DATA_URL, tsvcast);\n      console.log(result)\n\t\t\tsetData(result);\n\t\t};\n\t\tfetchValueData();\n    \n  }, []);\n  \n\n  //resize\n  useEffect(() => {\n    window.addEventListener(\"resize\", getMapsize);\n    return () => window.removeEventListener(\"resize\", getMapsize);\n  }, []);\n\n  return (\n    <>\n      <div id=\"header\">\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\">医療提供体制の状況</Typography>\n          </Toolbar>\n        </AppBar>\n        <CheckBoxs changeCheckbox={handleChangeCheckbox} />\n      </div>\n      <div id=\"panel\"></div>\n      <div id=\"map\" ref={mapRef}>\n        <MapGL\n          style={{}}\n          {...viewport}\n          mapStyle={\"mapbox://styles/mapbox/streets-v11\"}\n          mapboxApiAccessToken={MAPBOX_TOKEN}\n          onViewportChange={v => setViewport(v)}\n        />\n      </div>\n\n      <div id=\"bottom\" ref={bbtnRef}>\n        <BottomBtn changeBottomBtn={handleChangeBottomBtn} />\n      </div>\n    </>\n  );\n}\n\nexport default App;\n\n/*\n \n\n        */\n"]},"metadata":{},"sourceType":"module"}