(this.webpackJsonphospital=this.webpackJsonphospital||[]).push([[0],{164:function(e,t){},167:function(e,t){},223:function(e,t,a){e.exports=a(245)},230:function(e,t){},244:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(60),c=a.n(o),l=a(310),i=a(309),u=a(111),s=a.n(u),d=a(133),m=a(112),f=a(82),p=a(307),b=a(308),g=a(250),h=a(196),E=a(311),v=a(201),j=a(319),O=a(313),w={normal:"\u901a\u5e38",restriction:"\u5236\u9650",stop:"\u505c\u6b62",nobeds:"\u8a2d\u7f6e\u306a\u3057",unanswered:"\u672a\u56de\u7b54"},y={"\u901a\u5e38":[23,190,187],"\u5236\u9650":[255,165,0],"\u505c\u6b62":[214,34,70],"\u8a2d\u7f6e\u306a\u3057":[192,192,192],"\u672a\u56de\u7b54":[137,137,137]},k=[[1,152,189],[73,227,206],[216,254,181],[254,237,177],[254,173,84],[209,55,78]],x=function(e){var t=e.data,a=e.layerType,n=e.hospitalState,r=e.onHover,o=e.onClick;if(t){var c=Object.keys(n).filter((function(e){return n[e]})).map((function(e){return w[e]})),l=t.filter((function(e){return c.some((function(t){return e["\u533b\u7642\u533a\u5206\u56de\u7b54"]===t}))}));return[{point:new j.a({id:"scatterplot-layer",data:l,pickable:!0,opacity:.5,stroked:!0,filled:!0,radiusScale:1,radiusMinPixels:6,lineWidthMinPixels:1,getPosition:function(e){return[e["\u7d4c\u5ea6"],e["\u7def\u5ea6"]]},getRadius:0,getFillColor:function(e){return y[e["\u533b\u7642\u533a\u5206\u56de\u7b54"]]},getLineColor:function(e){return y[e["\u533b\u7642\u533a\u5206\u56de\u7b54"]]},onClick:o,onHover:r}),hex:new O.a({id:"hexagon-layer",data:l,colorRange:k,opacity:.8,radius:1e4,pickable:!0,extruded:!0,elevationScale:60,elevationRange:[0,3e3],getPosition:function(e){return[e["\u7d4c\u5ea6"],e["\u7def\u5ea6"]]},getColorValue:function(e){for(var t=e.length,a=0,n=0;n<e.length;n++)"\u505c\u6b62"!==e[n]["\u533b\u7642\u533a\u5206\u56de\u7b54"]&&"\u5236\u9650"!==e[n]["\u533b\u7642\u533a\u5206\u56de\u7b54"]||a++;return~~(a/t*100)},onClick:o,onHover:r})}[a]]}},C=a(134),M=a(27),S=a(314),I=a(295),L=a(294),F=a(316),z=Object(M.a)({root:{padding:0,margin:0}})((function(e){return r.a.createElement(L.a,Object.assign({color:"default"},e))})),H=Object(M.a)({root:{padding:0,marginLeft:"0.5em",color:"gray","&$checked":{color:"#17bebb"}},checked:{}})((function(e){return r.a.createElement(F.a,Object.assign({color:"default"},e))})),T=Object(M.a)({root:{padding:0,marginLeft:"0.25em",color:"gray","&$checked":{color:"#FFA500"}},checked:{}})((function(e){return r.a.createElement(F.a,Object.assign({color:"default"},e))})),R=Object(M.a)({root:{padding:0,marginLeft:"0.25em",color:"gray","&$checked":{color:"#d62246"}},checked:{}})((function(e){return r.a.createElement(F.a,Object.assign({color:"default"},e))})),A=Object(M.a)({root:{padding:0,marginLeft:"0.25em",color:"gray","&$checked":{color:"#c0c0c0"}},checked:{}})((function(e){return r.a.createElement(F.a,Object.assign({color:"default"},e))})),P=Object(M.a)({root:{padding:0,marginLeft:"0.25em",color:"gray","&$checked":{color:"#898989"}},checked:{}})((function(e){return r.a.createElement(F.a,Object.assign({color:"default"},e))}));var B=function(e){var t=e.value,a=e.onChange,n=function(e){a(Object(m.a)(Object(m.a)({},t),{},Object(C.a)({},e.target.name,e.target.checked)))};return r.a.createElement(S.a,{elevation:3,id:"panel"},r.a.createElement(I.a,{row:!0},r.a.createElement(z,{control:r.a.createElement(H,{checked:t.normal,onChange:n,name:"normal"}),label:"\u901a\u5e38"}),r.a.createElement(z,{control:r.a.createElement(T,{checked:t.restriction,onChange:n,name:"restriction"}),label:"\u5236\u9650"}),r.a.createElement(z,{control:r.a.createElement(R,{checked:t.stop,onChange:n,name:"stop"}),label:"\u505c\u6b62"}),r.a.createElement(z,{control:r.a.createElement(A,{checked:t.nobeds,onChange:n,name:"nobeds"}),label:"\u8a2d\u7f6e\u306a\u3057"}),r.a.createElement(z,{control:r.a.createElement(P,{checked:t.unanswered,onChange:n,name:"unanswered"}),label:"\u672a\u56de\u7b54"})))},W=a(297),$=a(296),D=a(192),J=a.n(D),N=a(193),_=a.n(N),V=Object(M.a)({root:{color:"#999","&$selected":{color:"#00f"}},selected:{}})((function(e){return r.a.createElement($.a,Object.assign({color:"default"},e))}));var Y=function(e){var t=e.value,a=e.onChange;return(r.a.createElement(W.a,{value:t,onChange:function(e,t){a(t)},showLabels:!0},r.a.createElement(V,{label:"Point",value:"point",icon:r.a.createElement(J.a,null)}),r.a.createElement(V,{label:"Hex",value:"hex",icon:r.a.createElement(_.a,null)})))},Z=a(298),q=a(315);function G(){return{top:"".concat(25,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(25,"%)")}}var K=Object(Z.a)((function(e){return{paper:{position:"absolute",width:"90%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Q(e){var t=e.body,a=e.open,n=e.onClose,o=K(),c=r.a.useState(G),l=Object(f.a)(c,1)[0],i=r.a.createElement("div",{style:l,className:o.paper},r.a.createElement("h2",{id:"simple-modal-title"},r.a.createElement("a",{rel:"noopener noreferrer",href:"https://cio.go.jp/hosp_monitoring_c19"},"\u5168\u56fd\u533b\u7642\u6a5f\u95a2\u306e\u533b\u7642\u63d0\u4f9b\u4f53\u5236\u306e\u72b6\u6cc1\u306e\u30aa\u30fc\u30d7\u30f3\u30c7\u30fc\u30bf")),r.a.createElement("div",{id:"simple-modal-description"},t));return r.a.createElement("div",null,r.a.createElement(q.a,{open:a,onClose:n,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},i))}var U=a(312),X=a(203),ee=a(300);function te(){return(te=Object(d.a)(s.a.mark((function e(t){var a,n,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:"utf-8",!window.TextDecoder){e.next=4;break}return n=new TextDecoder(a),e.abrupt("return",n.decode(t));case 4:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t],{type:"text/plain;charset=".concat(a)}),o=new FileReader;o.onload=function(){e(o.result)},o.onerror=function(){n(o.error)},o.readAsText(r,a)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=function(e){return te.apply(this,arguments)},ne=a(320),re=a(302),oe=a(306),ce=a(305),le=a(301),ie=a(303),ue=a(304),se=a(251),de={"\u901a\u5e38":3,"\u5236\u9650":2,"\u505c\u6b62":1,"\u8a2d\u7f6e\u306a\u3057":4,"\u672a\u56de\u7b54":5},me={"\u901a\u5e38":"#17bebb","\u5236\u9650":"#FFA500","\u505c\u6b62":"#d62246","\u8a2d\u7f6e\u306a\u3057":"#c0c0c0","\u672a\u56de\u7b54":"#898989"},fe=function(e,t){return e.id=e.code,Object.keys(e).forEach((function(t){isNaN(+e[t])||"id"===t||(e[t]=+e[t])})),e},pe=Object(Z.a)({table:{maxHeight:400,overflow:"auto","& th":{fontWeight:"bold",whiteSpace:"nowrap"},"& td":{whiteSpace:"nowrap"}}});var be=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=pe(),o=Object(n.useState)(null),c=Object(f.a)(o,2),l=c[0],i=c[1],u=Object(n.useState)("move"),j=Object(f.a)(u,2),O=j[0],w=j[1],y=Object(n.useState)({normal:!0,restriction:!0,stop:!0,nobeds:!0,unanswered:!0}),k=Object(f.a)(y,2),C=k[0],M=k[1],S=Object(n.useState)("point"),I=Object(f.a)(S,2),L=I[0],F=I[1],z=Object(n.useState)({width:window.innerWidth,height:window.innerHeight,longitude:139.0110974,latitude:36.3226885,zoom:6,maxZoom:20}),H=Object(f.a)(z,2),T=H[0],R=H[1],A=Object(n.useState)(null),P=Object(f.a)(A,2),W=P[0],$=P[1],D=r.a.useState(!1),J=Object(f.a)(D,2),N=J[0],_=J[1],V=function(){var a=e.current?e.current.offsetWidth:0,n=e.current?e.current.offsetHeight:0,r=t.current?t.current.offsetHeight:0;R((function(e){return Object(m.a)(Object(m.a)({},e),{},{width:a,height:n-r})}))};return Object(n.useEffect)(V,[]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)(Object(X.a)(t),ee.a);case 2:a=e.sent,n=Object.keys(a)[0],ae(a[n]).then((function(e){var t=Object(ne.a)(e,fe);t.sort((function(e,t){return de[t["\u533b\u7642\u533a\u5206\u56de\u7b54"]]-de[e["\u533b\u7642\u533a\u5206\u56de\u7b54"]]})),i(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()("data/covid-19_daily_survey.zip")}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",V),function(){return window.removeEventListener("resize",V)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"header"},r.a.createElement(p.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(g.a,{variant:"h6"},"\u533b\u7642\u63d0\u4f9b\u4f53\u5236\u306e\u72b6\u6cc1(2020/5/15\u6642\u70b9)"))),r.a.createElement(B,{value:C,onChange:M}),r.a.createElement(Q,{body:W,open:N,onClose:function(){_(!1)}})),r.a.createElement("div",{id:"panel"}),r.a.createElement("div",{id:"map",ref:e},r.a.createElement(h.a,Object.assign({style:{}},T,{mapStyle:"mapbox://styles/mapbox/light-v10",mapboxApiAccessToken:"pk.eyJ1Ijoic2hpbWl6dSIsImEiOiJjam95MDBhamYxMjA1M2tyemk2aHMwenp5In0.i2kMIJulhyPLwp3jiLlpsA",onViewportChange:function(e){return R(e)}}),r.a.createElement(E.a,{getCursor:function(){return O},layers:x({data:l,layerType:L,hospitalState:C,onHover:function(e){var t=e.object?"pointer":"move";w(t)},onClick:function(e){var t=e.object.points||[e.object];if(t){var n=function(e){var t=e.sort((function(e,t){return e["\u533b\u7642\u6a5f\u95a2ID"]-t["\u533b\u7642\u6a5f\u95a2ID"]})).map((function(e,t){return{key:t,a:e["\u533b\u7642\u6a5f\u95a2\u540d"],b:e["\u533b\u7642\u533a\u5206"],c:e["\u533b\u7642\u533a\u5206\u56de\u7b54"],d:e["\u533b\u7642\u6a5f\u95a2\u4f4f\u6240"],e:e["\u63d0\u51fa\u65e5"]}}));return(r.a.createElement(le.a,{className:a.table,component:se.a},r.a.createElement(re.a,{size:"small","aria-label":"a dense table"},r.a.createElement(ie.a,null,r.a.createElement(ue.a,null,r.a.createElement(ce.a,{align:"left"},"\u533b\u7642\u6a5f\u95a2\u540d"),r.a.createElement(ce.a,{align:"left"},"\u533b\u7642\u533a\u5206\u56de\u7b54"),r.a.createElement(ce.a,{align:"left"},"\u533b\u7642\u533a\u5206"),r.a.createElement(ce.a,{align:"left"},"\u533b\u7642\u6a5f\u95a2\u4f4f\u6240"),r.a.createElement(ce.a,{align:"left"},"\u63d0\u51fa\u65e5"))),r.a.createElement(oe.a,null,t.map((function(e){return r.a.createElement(ue.a,{key:e.key},r.a.createElement(ce.a,{align:"left"},e.a),r.a.createElement(ce.a,{style:{fontWeight:"bold",color:me[e.c]},align:"left"},e.c),r.a.createElement(ce.a,{align:"left"},e.b),r.a.createElement(ce.a,{align:"left"},e.d),r.a.createElement(ce.a,{align:"left"},e.e))}))))))}(t);$(n),_(!0)}}}),controller:{type:v.a,dragRotate:!1},initialViewState:T}))),r.a.createElement("div",{id:"bottom",ref:t},r.a.createElement(Y,{value:L,onChange:F})))},ge=a(197),he=Object(ge.a)({typography:{fontSize:12},props:{MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiInputLabel:{size:"small",margin:"dense"},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense"},MuiToolbar:{variant:"dense"}},overrides:{MuiInputLabel:{sizeSmall:{marginLeft:4,marginRight:4,padding:12}}}});a(244);c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{theme:he},r.a.createElement(l.a,null),r.a.createElement(be,null)),","),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.94341dc8.chunk.js.map